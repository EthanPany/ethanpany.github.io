<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> MathJax Clipboard Formula Replacer | Ethan Pan </title> <meta name="author" content="Ethan Pan"> <meta name="description" content="(UserScript with JS) A browser extension that automatically converts complex MathJax formulas to clean TeX format when copying from web pages."> <meta name="keywords" content="Computer Science, AI, Research, Personal Home Page"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%F0%9F%93%91&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://ethanpany.github.io/projects/mathjax/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Ethan</span> Pan </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="nav-item active"> <a class="nav-link" href="/projects/">projects <span class="sr-only">(current)</span> </a> </li> <li class="nav-item "> <a class="nav-link" href="/teaching/">teaching </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications </a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">MathJax Clipboard Formula Replacer</h1> <p class="post-description">(UserScript with JS) A browser extension that automatically converts complex MathJax formulas to clean TeX format when copying from web pages.</p> </header> <article> <p>Replace complex MathJax HTML with its underlying TeX formula in your clipboard, making it easy to paste into LLM tools like ChatGPT, Markdown editors, and other TeX-aware applications. If no MathJax is detected, the original selection is copied unchanged.</p> <h3 id="the-problem">The Problem</h3> <p>My intro to AI class uses webpages as slides, and so do the homework questions for my ECE class on Canvas. One problem with this setup is that whenever I copy something containing a formula and paste it into tools like ChatGPT, the formula disappears.</p> <p>I used to convert content into Markdown using Typora before pasting it into ChatGPT, while some of my classmates just take tons of screenshots. Neither approach is elegant—both waste either time or storage space. So I learned scripting from scratch and implemented this solution with help from ChatGPT.</p> <h3 id="key-features">Key Features</h3> <p><strong>Automatic MathJax Detection</strong> - Identifies MathJax content within your copied selection and works with both MathJax v2 and v3.</p> <p><strong>TeX Extraction</strong> - Accurately extracts TeX formulas from complex HTML structures.</p> <p><strong>HTML Cleaning</strong> - Removes unnecessary style, class, and id attributes from copied HTML for cleaner pasting.</p> <p><strong>Graceful Fallback</strong> - If no MathJax is found or an error occurs, the script copies the original content without modification.</p> <p><strong>Universal Compatibility</strong> - Works on all websites with no special browser permissions required.</p> <h3 id="how-it-works">How It Works</h3> <p>This UserScript runs automatically in your browser using extensions like Tampermonkey or Greasemonkey:</p> <ol> <li> <strong>Event Listener</strong> - Listens for copy events on any webpage</li> <li> <strong>Selection Analysis</strong> - Captures both plain text and HTML content when you copy</li> <li> <strong>MathJax Detection</strong> - Uses regex to identify MathJax elements in the selection</li> <li> <strong>Smart Processing</strong> - Extracts TeX formulas from <code class="language-plaintext highlighter-rouge">mjx-container</code> (v3) or <code class="language-plaintext highlighter-rouge">MathJax</code> span elements (v2)</li> <li> <strong>Clean Output</strong> - Removes styling attributes and replaces complex HTML with clean TeX formulas</li> </ol> <h3 id="technical-implementation">Technical Implementation</h3> <p>The script uses JavaScript to:</p> <ul> <li>Parse HTML fragments into DOM documents</li> <li>Identify MathJax elements by their container classes</li> <li>Extract TeX formulas from <code class="language-plaintext highlighter-rouge">alttext</code> or <code class="language-plaintext highlighter-rouge">aria-label</code> attributes</li> <li>Replace complex HTML structures with simple TeX text nodes</li> <li>Handle errors gracefully with fallback to original content</li> </ul> <h3 id="installation--usage">Installation &amp; Usage</h3> <ol> <li>Install a UserScript manager (Tampermonkey for most browsers, or Greasemonkey for Firefox)</li> <li>Install the script from the repository or copy the code into your UserScript manager</li> <li>The script runs automatically on all webpages</li> <li>Simply copy text as normal - MathJax formulas will be automatically converted to TeX format</li> <li>Paste into LaTeX editors, Markdown files, or any TeX-aware application</li> </ol> <h3 id="open-source--contributing">Open Source &amp; Contributing</h3> <p>This project is licensed under GNU GPL v3. As my first UserScript project, I welcome all feedback, suggestions, and contributions!</p> <p>The project is available on GitHub with plans to publish on GreasyFork once stable. If you find it useful, please consider starring the repository.</p> <p><strong>Repository:</strong> <a href="https://github.com/yourusername/mathjax-clipboard-replacer" rel="external nofollow noopener" target="_blank">GitHub - MathJax Clipboard Formula Replacer</a></p> </article> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2025 Ethan Pan. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Last updated: September 04, 2025. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?b7816bd189846d29eded8745f9c4cf77"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.min.js" integrity="sha256-rjmgmaB99riUNcdlrDtcAiwtLIojSxNyUFdl+Qh+rB4=" crossorigin="anonymous"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=G-6ETY3W06JL"></script> <script>function gtag(){window.dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-6ETY3W06JL");</script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> <script>var wechatModal=document.getElementById("WeChatMod"),wechatBtn=document.getElementById("WeChatBtn");wechatBtn.onclick=function(){wechatModal.style.display="block"},window.onclick=function(t){t.target==wechatModal&&(wechatModal.style.display="none")};</script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>addBackToTop();</script> <script type="module" src="/assets/js/search/ninja-keys.min.js?601a2d3465e2a52bec38b600518d5f70"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script>let theme=determineComputedTheme();const ninjaKeys=document.querySelector("ninja-keys");"dark"===theme?ninjaKeys.classList.add("dark"):ninjaKeys.classList.remove("dark");const openSearchModal=()=>{const e=document.querySelector(".navbar-collapse");e.classList.contains("show")&&e.classList.remove("show"),ninjaKeys.open()};</script> <script>const ninja=document.querySelector("ninja-keys");ninja.data=[{id:"nav-about",title:"about",section:"Navigation",handler:()=>{window.location.href="/"}},{id:"nav-cv",title:"cv",description:"You can also see the PDF version of Resume by clicking the botton in the right top corner.",section:"Navigation",handler:()=>{window.location.href="/cv/"}},{id:"nav-projects",title:"projects",description:"A growing collection of your cool projects.",section:"Navigation",handler:()=>{window.location.href="/projects/"}},{id:"nav-teaching",title:"teaching",description:"Materials for courses I taught.",section:"Navigation",handler:()=>{window.location.href="/teaching/"}},{id:"nav-publications",title:"publications",description:"publications by categories in reversed chronological order.",section:"Navigation",handler:()=>{window.location.href="/publications/"}},{id:"nav-blog",title:"blog",description:"",section:"Navigation",handler:()=>{window.location.href="/blog/"}},{id:"projects-ai-file-organizer",title:"AI File Organizer",description:"(macOS App) An intelligent file management system that understands your content and organizes files the way you would.",section:"Projects",handler:()=>{window.location.href="/projects/ai-file-organizer/"}},{id:"projects-personal-budget-calculator",title:"Personal Budget Calculator",description:"(Web App with React + TS) A web application for tracking personal income and expenses",section:"Projects",handler:()=>{window.location.href="/projects/budget-calculator/"}},{id:"projects-cal-glass",title:"Cal-Glass",description:"(Health Monitoring Wearable) A wearable device that sees what you eat and helps you build a healthier lifestyle.",section:"Projects",handler:()=>{window.location.href="/projects/calGlass/"}},{id:"projects-damaku-manager",title:"Damaku-manager",description:"(Chrome Extension) A Chrome Extension to bring the fun of real-time commentary to YouTube.",section:"Projects",handler:()=>{window.location.href="/projects/damaku-manager/"}},{id:"projects-mathjax-clipboard-formula-replacer",title:"MathJax Clipboard Formula Replacer",description:"(UserScript with JS) A browser extension that automatically converts complex MathJax formulas to clean TeX format when copying from web pages.",section:"Projects",handler:()=>{window.location.href="/projects/mathjax/"}},{id:"projects-our-home",title:"Our Home",description:"(Unity Game) An interactive game that explores the meaning of home with the help of a philosophical AI.",section:"Projects",handler:()=>{window.location.href="/projects/ourHome/"}},{id:"projects-ai-resume-builder",title:"AI Resume Builder",description:"(n8n workflow) A smart tool to help you create professional resumes with ease",section:"Projects",handler:()=>{window.location.href="/projects/resume-builder/"}},{id:"projects-power-writer",title:"Power Writer",description:"(Full Stack with Python) An AI-powered slide generator that turns tedious work into a five-minute task.",section:"Projects",handler:()=>{window.location.href="/projects/sliGen/"}},{id:"socials-email",title:"Send email",section:"Socials",handler:()=>{window.open("mailto:%65%70%61%6E@%63%73.%77%69%73%63.%65%64%75","_blank")}},{id:"socials-researchgate",title:"ResearchGate",section:"Socials",handler:()=>{window.open("https://www.researchgate.net/profile/Yiyang-Pan-5/","_blank")}},{id:"socials-github",title:"GitHub",section:"Socials",handler:()=>{window.open("https://github.com/EthanPany","_blank")}},{id:"socials-linkedin",title:"LinkedIn",section:"Socials",handler:()=>{window.open("https://www.linkedin.com/in/yiyang-pan-65b27a288","_blank")}},{id:"socials-instagram",title:"Instagram",section:"Socials",handler:()=>{window.open("https://instagram.com/EthanPannnn","_blank")}},{id:"socials-rss",title:"RSS Feed",section:"Socials",handler:()=>{window.open("/feed.xml","_blank")}},{id:"light-theme",title:"Change theme to light",description:"Change the theme of the site to Light",section:"Theme",handler:()=>{setThemeSetting("light")}},{id:"dark-theme",title:"Change theme to dark",description:"Change the theme of the site to Dark",section:"Theme",handler:()=>{setThemeSetting("dark")}},{id:"system-theme",title:"Use system default theme",description:"Change the theme of the site to System Default",section:"Theme",handler:()=>{setThemeSetting("system")}}];</script> </body> </html>